{"version":3,"file":"react-native-viewport-helpers.cjs.production.min.js","sources":["../src/index.tsx","../src/observer.tsx"],"sourcesContent":["import * as React from 'react';\nimport { View, Text } from 'react-native';\nimport {\n  useState,\n  useEffect,\n  useLayoutEffect,\n  EffectCallback,\n  useCallback,\n} from 'react';\nimport { observe } from './observer';\n\nexport const Thing = () => {\n  return (\n    <View>\n      <Text>the snozzberries taste like snozzberries</Text>\n    </View>\n  );\n};\n\nexport function useIsInViewPortEffect(\n  ref: React.MutableRefObject<View | HTMLDivElement | null>,\n  onVisible: EffectCallback = () => {},\n  dependencies: any[] = [],\n  disabled = false,\n  delay = 500\n) {\n  const [interval, setVPInverval] = useState<NodeJS.Timeout | null>(null);\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n  const clear = useCallback(() => {\n    if (interval) {\n      clearInterval(interval);\n    }\n    setInterval(null);\n  }, []);\n  useLayoutEffect(() => {\n    if (disabled) {\n      return clear;\n    }\n    setVPInverval(\n      setInterval(() => {\n        if (!ref.current) {\n          return;\n        }\n        observe(ref.current, isVisible, setIsVisible);\n      }, delay)\n    );\n    return clear;\n  }, [ref, disabled, delay, ...dependencies]);\n\n  useEffect(() => {\n    if (isVisible) {\n      const effect = onVisible();\n      return effect;\n    }\n  }, [isVisible]);\n  return isVisible;\n}\n","import { View } from 'react-native';\nimport { nativeObserve } from 'nativeObserver';\n\nexport const observe = (\n  ref: Element | View,\n  isVisible: boolean,\n  setIsVisible: (isVisible: () => boolean) => void\n) => {\n  nativeObserve(ref as View, isVisible, setIsVisible);\n};\n"],"names":["React","View","Text","ref","onVisible","dependencies","disabled","delay","useState","interval","setVPInverval","isVisible","setIsVisible","clear","useCallback","clearInterval","setInterval","useLayoutEffect","current","nativeObserve","observe","useEffect"],"mappings":"wGAWqB,kBAEjBA,gBAACC,YACCD,gBAACE,iGAMLC,EACAC,EACAC,EACAC,EACAC,YAHAH,IAAAA,EAA4B,uBAC5BC,IAAAA,EAAsB,aACtBC,IAAAA,GAAW,YACXC,IAAAA,EAAQ,WAE0BC,WAAgC,MAA3DC,OAAUC,SACiBF,YAAkB,GAA7CG,OAAWC,OACZC,EAAQC,cAAY,WACpBL,GACFM,cAAcN,GAEhBO,YAAY,OACX,WACHC,kBAAgB,kBACVX,EACKO,GAETH,EACEM,YAAY,WACLb,EAAIe,SCrCM,SACrBf,EACAQ,EACAC,GAEAO,gBAAchB,EAAaQ,EAAWC,GDmChCQ,CAAQjB,EAAIe,QAASP,EAAWC,IAC/BL,IAEEM,KACLV,EAAKG,EAAUC,UAAUF,IAE7BgB,YAAU,cACJV,SACaP,KAGhB,CAACO,IACGA"}