{"version":3,"file":"react-native-viewport-helpers.cjs.development.js","sources":["../src/observer.tsx","../src/index.tsx"],"sourcesContent":["import { View } from 'react-native';\nimport { nativeObserve } from 'nativeObserver';\n\nexport const observe = (\n  ref: Element | View,\n  isVisible: boolean,\n  setIsVisible: (isVisible: () => boolean) => void\n) => {\n  nativeObserve(ref as View, isVisible, setIsVisible);\n};\n","import * as React from 'react';\nimport { View, Text } from 'react-native';\nimport {\n  useState,\n  useEffect,\n  useLayoutEffect,\n  EffectCallback,\n  useCallback,\n} from 'react';\nimport { observe } from './observer';\n\nexport const Thing = () => {\n  return (\n    <View>\n      <Text>the snozzberries taste like snozzberries</Text>\n    </View>\n  );\n};\n\nexport function useIsInViewPortEffect(\n  ref: React.MutableRefObject<View | HTMLDivElement | null>,\n  onVisible: EffectCallback = () => {},\n  dependencies: any[] = [],\n  disabled = false,\n  delay = 500\n) {\n  const [interval, setVPInverval] = useState<NodeJS.Timeout | null>(null);\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n  const clear = useCallback(() => {\n    if (interval) {\n      clearInterval(interval);\n    }\n    setInterval(null);\n  }, []);\n  useLayoutEffect(() => {\n    if (disabled) {\n      return clear;\n    }\n    setVPInverval(\n      setInterval(() => {\n        if (!ref.current) {\n          return;\n        }\n        observe(ref.current, isVisible, setIsVisible);\n      }, delay)\n    );\n    return clear;\n  }, [ref, disabled, delay, ...dependencies]);\n\n  useEffect(() => {\n    if (isVisible) {\n      const effect = onVisible();\n      return effect;\n    }\n  }, [isVisible]);\n  return isVisible;\n}\n"],"names":["observe","ref","isVisible","setIsVisible","nativeObserve","Thing","React","View","Text","useIsInViewPortEffect","onVisible","dependencies","disabled","delay","useState","interval","setVPInverval","clear","useCallback","clearInterval","setInterval","useLayoutEffect","current","useEffect","effect"],"mappings":";;;;;;AAGO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CACrBC,GADqB,EAErBC,SAFqB,EAGrBC,YAHqB;EAKrBC,4BAAa,CAACH,GAAD,EAAcC,SAAd,EAAyBC,YAAzB,CAAb;CALK;;ICQME,KAAK,GAAG,SAARA,KAAQ;SAEjBC,mBAAA,CAACC,gBAAD,MAAA,EACED,mBAAA,CAACE,gBAAD,MAAA,4CAAA,CADF,CADF;CADK;AAQP,SAAgBC,sBACdR,KACAS,WACAC,cACAC,UACAC;MAHAH;IAAAA,YAA4B;;;MAC5BC;IAAAA,eAAsB;;;MACtBC;IAAAA,WAAW;;;MACXC;IAAAA,QAAQ;;;kBAE0BC,cAAQ,CAAwB,IAAxB;MAAnCC;MAAUC;;mBACiBF,cAAQ,CAAU,KAAV;MAAnCZ;MAAWC;;MACZc,KAAK,GAAGC,iBAAW,CAAC;QACpBH,QAAJ,EAAc;MACZI,aAAa,CAACJ,QAAD,CAAb;;;IAEFK,WAAW,CAAC,IAAD,CAAX;GAJuB,EAKtB,EALsB,CAAzB;EAMAC,qBAAe,CAAC;QACVT,QAAJ,EAAc;aACLK,KAAP;;;IAEFD,aAAa,CACXI,WAAW,CAAC;UACN,CAACnB,GAAG,CAACqB,OAAT,EAAkB;;;;MAGlBtB,OAAO,CAACC,GAAG,CAACqB,OAAL,EAAcpB,SAAd,EAAyBC,YAAzB,CAAP;KAJS,EAKRU,KALQ,CADA,CAAb;WAQOI,KAAP;GAZa,GAaXhB,GAbW,EAaNW,QAbM,EAaIC,KAbJ,SAacF,YAbd,EAAf;EAeAY,eAAS,CAAC;QACJrB,SAAJ,EAAe;UACPsB,MAAM,GAAGd,SAAS,EAAxB;aACOc,MAAP;;GAHK,EAKN,CAACtB,SAAD,CALM,CAAT;SAMOA,SAAP;;;;;;"}